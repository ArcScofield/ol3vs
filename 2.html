<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<link href="js/lib/bootstrap/css/bootstrap.css" rel="stylesheet" media="all">
<link href="css/common.css" rel="stylesheet" media="all">
<link href="css/2.css" rel="stylesheet" media="all">
<link href="css/plug.css" rel="stylesheet" media="all">
<!--[if lt IE 9]>
<script>
(function(tags){for(var i=0; i<tags.length; i++)document.createElement(tags[i]);})(["article","aside","details","figcaption","figure","footer","header","hgroup","nav","section","video"]);
</script>
<![endif]-->

<title>FIFA Online3数据库</title>
<style type="text/css">

</style>
</head>

<body>
<div class="nav">
    <div class="wrap">
        <ul class="list-nav">
            <li class="nav-item nav-item-cur">
                <a href="javascript:;">球员数据库</a>
            </li>
            <li class="nav-item">
                <a href="index.php">战队系统</a>
            </li>
        </ul>
    </div>
</div>
<div class="wrap">
    <div class="side">
        <div class="box-txt-search">
            <input type="input" placeholder="逗号分隔搜索多名球员" id="txtName">
        </div>
        <div class="box-ad-search">
            <ul class="list-ad-search">
                <li>
                    <span>位置：</span>
                    <select id="slPos">
                        <option>位置</option>
                        <optgroup label="FW">
                            <option value="CF">CF</option>
                            <option value="RW">RW</option>
                            <option value="LW">LW</option>
                            <option value="ST">ST</option>
                        </optgroup>
                        <optgroup label="MF">
                            <option value="LM">LM</option>
                            <option value="RM">RM</option>
                            <option value="CM">CM</option>
                            <option value="CAM">CAM</option>
                            <option value="CDM">CDM</option>
                        </optgroup>
                        <optgroup label="DF">
                            <option value="LWB">LWB</option>
                            <option value="LB">LB</option>
                            <option value="CB">CB</option>
                            <option value="RB">RB</option>
                            <option value="RWB">RWB</option>
                        </optgroup>
                        <optgroup label="GK">
                            <option value="GK">GK</option>
                        </optgroup>
                    </select>
                </li>
                <li>
                    <span>赛季：</span>
                    <select id="slSeason">
                        <option value="0">赛季</option>
                        <option value="14">2014</option>
                        <option value="10">2010</option>
                        <option value="w">WC</option>
                        <option value="l">传奇</option>
                    </select>
                </li>
                <li>
                    <span>能力：</span>
                    <select id="slMinCapacity">
                        <option value="">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                        <option value="90">90</option>
                    </select>
                     - 
                    <select id="slMaxCapacity">
                        <option value="">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                        <option value="90">90</option>
                    </select>
                </li>
                <li>
                    <span>联赛：</span>
                    <select id="selectMatch">
                        <option value="">联赛</option>
                        <option value="1">西班牙足球甲级联赛</option>
                        <option value="2">德国足球甲级联赛</option>
                        <option value="3">英格兰足球超级联赛</option>
                        <option value="4">意大利足球甲级联赛</option>
                        <option value="5">法国足球甲级联赛</option>
                        <option value="6">荷兰足球甲级联赛</option>
                        <option value="7">比利时足球甲级联赛</option>
                        <option value="8">丹麦足球超级联赛</option>
                        <option value="9">英格兰足球冠军联赛</option>
                        <option value="10">法国足球乙级联赛</option>
                        <option value="11">德国足球乙级联赛</option>
                        <option value="12">意大利足球乙级联赛</option>
                        <option value="13">美国职业足球大联盟</option>
                        <option value="14">挪威足球超级联赛</option>
                        <option value="15">苏格兰足球超级联赛</option>
                        <option value="16">西班牙足球乙级联赛</option>
                        <option value="17">瑞典足球超级联赛</option>
                        <option value="18">英格兰足球甲级联赛</option>
                        <option value="19">阿根廷联赛</option>
                        <option value="20">葡萄牙足球联赛</option>
                        <option value="21">俄罗斯足球超级联赛</option>
                        <option value="22">瑞士足球超级联赛</option>
                        <option value="23">沙特阿拉伯足球联赛</option>
                        <option value="24">澳大利亚职业足球联赛</option>
                        <option value="25">土耳其足球超级联赛</option>
                    </select>
                </li>
                <li>
                    <span>球队：</span>
                    <select id="selectTeam">
                        <option>球队</option>
                    </select>
                </li>
                <li>
                    <span>详细能力：</span>
                    <select id="slXx1">
                        <option value="">详细能力</option>
                        <option value="1">射术</option>
                        <option value="2">射门力量</option>
                        <option value="3">弧线</option>
                        <option value="4">远射</option>
                        <option value="5">凌空抽射</option>
                        <option value="6">任意球</option>
                        <option value="7">罚点球</option>
                        <option value="8">头球</option>
                        <option value="9">站位</option>
                        <option value="10">速度</option>
                        <option value="11">加速</option>
                        <option value="12">灵活</option>
                        <option value="13">反应</option>
                        <option value="14">弹跳</option>
                        <option value="15">体力</option>
                        <option value="16">强壮</option>
                        <option value="17">平衡</option>
                        <option value="18">短传</option>
                        <option value="19">长传</option>
                        <option value="20">传中</option>
                        <option value="21">控球</option>
                        <option value="22">盘带</option>
                        <option value="23">盘带速度</option>
                        <option value="24">战术意识</option>
                        <option value="25">视野</option>
                        <option value="26">抢断</option>
                        <option value="27">铲断</option>
                        <option value="28">人盯人</option>
                        <option value="29">侵虐性</option>
                        <option value="30">GK扑救</option>
                        <option value="31">GK手控球</option>
                        <option value="32">GK大脚开球</option>
                        <option value="33">GK反应</option>
                        <option value="34">GK防守站位</option>
                    </select>
                </li>
                <li>
                    <span>习惯脚：</span>
                    <select>
                        <option value="">习惯脚</option>
                        <option value="">左脚</option>
                        <option value="">右脚</option>
                        <option value="">左右脚</option>
                    </select>
                </li>
                <li>
                    <span>逆足脚：</span>
                    <select>
                        <option value="">--</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </li>
                <li>
                    <span>花式动作：</span>
                    <select id="slMinHsdz">
                        <option value="">--</option>
                        <option value="1">1星</option>
                        <option value="2">2星</option>
                        <option value="3">3星</option>
                        <option value="4">4星</option>
                        <option value="5">5星</option>
                    </select>
                     - 
                    <select id="slMaxHsdz">
                        <option value="">--</option>
                        <option value="1">1星</option>
                        <option value="2">2星</option>
                        <option value="3">3星</option>
                        <option value="4">4星</option>
                        <option value="5">5星</option>
                    </select>
                </li>
                <li>
                    <span>身高：</span>
                    <select id="slMinSg">
                        <option value="">--</option>
                        <option value="170">170</option>
                        <option value="175">175</option>
                        <option value="180">180</option>
                        <option value="185">185</option>
                        <option value="190">190</option>
                    </select>
                     - 
                    <select id="slMaxSg">
                        <option value="">--</option>
                        <option value="170">170</option>
                        <option value="175">175</option>
                        <option value="180">180</option>
                        <option value="185">185</option>
                        <option value="190">190</option>
                    </select>
                </li>
                <li>
                    <span>体重：</span>
                    <select id="slMinTz">
                        <option value="">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                    </select>
                     - 
                    <select id="slMaxTz">
                        <option value="">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                    </select>
                </li>
                <li>
                    <span>体型：</span>
                    <select>
                        <option value="">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                        <option value="90">90</option>
                    </select>
                     - 
                    <select>
                        <option value="">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                        <option value="90">90</option>
                    </select>
                </li>
                <li>
                    <span>出生年份：</span>
                    <select id="slMinCsnf">
                        <option value="">--</option>
                        <option value="1970">1970</option>
                        <option value="1975">1875</option>
                        <option value="1980">1980</option>
                        <option value="1985">1985</option>
                        <option value="1990">1990</option>
                    </select>
                     - 
                    <select id="slMaxCsnf">
                        <option value="">--</option>
                        <option value="1970">1970</option>
                        <option value="1975">1875</option>
                        <option value="1980">1980</option>
                        <option value="1985">1985</option>
                        <option value="1990">1990</option>
                    </select>
                </li>
                <li>
                    <span>隐藏能力：</span>
                    <select id="selectHdProp"></select>
                </li>
                <li>
                    <span></span>
                    <button type="button" class="btn btn-default">重置</button>
                    <button type="button" class="btn btn-primary" id="btnSearch">查询</button>
                </li>
            </ul>
        </div>
    </div>
    <div class="main">
        <table class="tb-team table table-hover table-striped" id="listPlayer">
            <thead>
                <tr>
                    <th width="5%"></th>
                    <th>赛季</th>
                    <th>位置</th>
                    <th>球员名</th>
                    <th>能力</th>
                    <th>俱乐部</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>
<footer class="footer">
    <p>© 2015 ol3vs.com Inc. All rights reserved.</p>
</footer>

<div class="">
    <div class="box-player-vs box-card">
        <div class="box-top-bar">返回</div>
        <div class="wrap">
            <div class="box-player-info">
                <div class="box-head"></div>
                <div>
                    <div>80KG 皇家马德里</div>
                    <div>1985.2.25</div>
                    <div></div>
                </div>
            </div>
            <div class="box-player-info">
                <div class="box-head"></div>
                <div>
                    <div>80KG 皇家马德里</div>
                    <div>1985.2.25</div>
                    <div></div>
                </div>
            </div>
        </div>
        <div class="box-player-data">
            <ul>
                <li>总能力值</li>
                <li></li>

            </ul>
            <table id="listPlayerVs" class="tb-team table table-hover table-striped">
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/lib/jq/jquery.js"></script>
<script type="text/javascript" src="js/lib/handlebars/handlebars.js"></script>
<script type="text/javascript" src="js/datas.js"></script>
<script id="playerTpl" type="text/x-handlebars-template">
{{#each players}}
    <tr>
        <td class="td-c"><input type="checkbox" data-id="{{id}}"></td>
        <td><span class="icon-sj icon-sj-{{sj}}"></span></td>
        <td><span class="label {{#cls}}{{pos}}{{/cls}}">{{pos}}</span></td>
        <td>{{name}}</td>
        <td>{{zp}}</td>
        <td>{{jlb}}</td>
    </tr>
{{/each}}
</script>
<script id="vsTpl" type="text/x-handlebars-template">
{{#each people}}
    <tr class="{{pos}}">
        <td>
            <span class="data-item">{{name}}</span>
        </td>
        <td>
            <span class="data-player-f">{{item.[0]}}</span>
        </td>
        <td>
            <span class="data-player-s">{{item.[1]}}</span>
        </td>
        <td>
            <span class="data-diff">{{item.[0]/item.[1]}}</span>
        </td>
    </tr>
{{/each}}
</script>
<script type="text/javascript">
$(function () {
    Handlebars.registerHelper('cls', function(options) {
        var cls = {
            "ST": "label-danger",
            "CF": "label-danger",
            "LW": "label-danger",
            "RW": "label-danger",
            "CAM": "label-success",
            "CM": "label-success",
            "LM": "label-success",
            "RM": "label-success",
            "CDM": "label-success",
            "LB": "label-primary",
            "RB": "label-primary",
            "CB": "label-primary",
            "GK": "label-warning"
        };

        return cls[options.fn(this)];
    });
    var source   = $("#playerTpl").html();
    var template = Handlebars.compile(source);
    var html = template(defaultPlayers);
    $("#listPlayer").find("tbody").html(html);

    var xx = {
        "people": [
            {"name": "射术", "pos": "cam rw cf st", "item": [86, 80]},
            {"name": "射门力量", "pos": "cam rw cf st", "item": "smll"},
            {"name": "弧线", "pos": "", "item": "hx"},
            {"name": "远射", "pos": "cm cam rw cf st rm", "item": "ys"},
            {"name": "凌空抽射", "pos": "cf st", "item": "lkcs"},
            {"name": "任意球", "pos": "", "item": "ryq"},
            {"name": "罚点球", "pos": "", "item": "fdq"},
            {"name": "头球", "pos": "rb cb cdm cm cam cf st", "item": "tq"},
            {"name": "站位", "pos": "rb cb cdm cm cam rm", "item": "zw"},
            {"name": "速度", "pos": "rb cb cdm cm cam rw cf st rm", "item": "sd"},
            {"name": "加速", "pos": "rw cf st rm", "item": "js"},
            {"name": "灵活", "pos": "rw rm", "item": "lh"},
            {"name": "反应", "pos": "gk rb cb cdm cm cam rw cf st rm", "item": "fy"},
            {"name": "弹跳", "pos": "gk cb", "item": "tt"},
            {"name": "体力", "pos": "rb cdm cm rw rm", "item": "tl"},
            {"name": "强壮", "pos": "rb cb cdm cm cf st", "item": "qz"},
            {"name": "平衡", "pos": "", "item": "ph"},
            {"name": "短传", "pos": "rb cb cdm cm cam rw cf st rm", "item": "dc"},
            {"name": "长传", "pos": "cdm cm cam rw rm", "item": "cc"},
            {"name": "传中", "pos": "rb rw cf rm", "item": "cz"},
            {"name": "控球", "pos": "rb cb cdm cm cam rw cf st rm", "item": "kq"},
            {"name": "盘带", "pos": "cm cam rw cf st rm", "item": "pd"},
            {"name": "战术意识", "pos": "", "item": "zsys"},
            {"name": "视野", "pos": "cdm cm cam rw rm", "item": "sy"},
            {"name": "抢断", "pos": "rb cb cdm cm", "item": "qd"},
            {"name": "铲断", "pos": "rb cb cdm", "item": "cd"},
            {"name": "人盯人", "pos": "cb cdm", "item": "rdr"},
            {"name": "侵略性", "pos": "rb cb cdm", "item": "qnx"},
            {"name": "GK扑救", "pos": "gk", "item": "gkpj"},
            {"name": "GK手控球", "pos": "gk", "item": "gkskq"},
            {"name": "GK大脚开球", "pos": "gk", "item": "gkdjkq"},
            {"name": "GK反应", "pos": "gk", "item": "gkfy"},
            {"name": "GK防守站位", "pos": "gk", "item": "gkfszw"}
        ]
    };
    var source   = $("#vsTpl").html();
    var template = Handlebars.compile(source);
    var html = template(xx);
    $("#listPlayerVs").find("tbody").html(html);
    /**
    $.ajax({
        url: "js/1.json",
        dataType: "json",
        success: function (resp) {
            if (resp && resp.code === "ok") {
                result = resp.data;
                renderList(result);
            }
        }
    });
    */

    /**
    * 渲染list
    */
    function renderList(data) {
        var html = "";
        
        for (var i = 0; i < data.length; i++) {
            html += "<tr>";
            html += "<td class=\"t-c\"><input value=\"" + data[i].id + "\" type=\"checkbox\"></td>";
            html += "<td><i></i>CF</td>";
            html += "<td>" + data[i].name + "</td>";
            html += "<td>83</td>";
            html += "<td>" + data[i].jlb + "</td>";
            html += "</tr>"
        }

        $(".main > table > tbody").html(html);
    }

    $("#selectMatch").change(function () {
        var val = $(this)[0].selectedIndex;
        var doc = document.createDocumentFragment();
        var datas = Matches[val - 1].team;
        var op = document.createElement("option");

        op.text = "球队";
        op.value = 0;
        doc.appendChild(op);
        for (var i = 0; i < datas.length; i++) {
            op = document.createElement("option");
            op.text = datas[i].name;
            op.value = datas[i].id;
            doc.appendChild(op);
        }
        $("#selectTeam").empty()[0].appendChild(doc);
    });

    /*
    * 加载隐藏能力开始
    */
    var doc = document.createDocumentFragment();
    var op = {};
    for (var i = 0; i < HdProp.length; i++) {
        op = document.createElement("option");
        op.text = HdProp[i];
        op.value = i;
        doc.appendChild(op);
    }
    $("#selectHdProp")[0].appendChild(doc);
    /*
    * 加载隐藏能力完
    */



    $("#btnSearch").click(function () {
        search();
    });

    $("#txtName").keypress(function(e) {
        if (e.keyCode === 13) {
            search();
        }
    });

    function search() {
        var data = {
            "name": $("#txtName").val().split(/[,，]/g),
            "sj": $("#slSeason").val()
        };

        $.post("module/search.php", data, function (resp) {
            console.log(resp);
        });
    }

    $("#listPlayer").on("click", "tr", function () {
        var cbox = $(this).children().find("input");
        if (cbox.prop("checked")) {
            cbox.prop("checked", false);
        } else {
            cbox.prop("checked", true);
        }
    }).on("click", "input", function (e) {
        e.stopPropagation();
    });
});
</script>
</body>
</html>