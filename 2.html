<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.2/css/bootstrap.min.css" media="all">
<link href="css/common.css" rel="stylesheet" media="all">
<link href="css/2.css" rel="stylesheet" media="all">
<link href="css/plug.css" rel="stylesheet" media="all">
<!--[if lt IE 9]>
<script>
(function(tags){for(var i=0; i<tags.length; i++)document.createElement(tags[i]);})(["article","aside","details","figcaption","figure","footer","header","hgroup","nav","section","video"]);
</script>
<![endif]-->

<title>FIFA Online3数据库</title>
<style type="text/css">

</style>
</head>

<body>
<div class="nav">
    <div class="wrap">
        <ul class="list-nav">
            <li class="nav-item nav-item-cur">
                <a href="javascript:;">球员数据库</a>
            </li>
            <li class="nav-item">
                <a href="index.php">战队系统</a>
            </li>
        </ul>
    </div>
</div>
<div class="wrap">
    <div class="side">
        <h4>搜索球员</h4>
        <div class="box-txt-search">
            <input type="input" placeholder="逗号分隔搜索多名球员" id="txtName">
        </div>
        <div class="box-ad-search">
            <ul class="list-ad-search">
                <li>
                    <span>位置：</span>
                    <select id="slPos">
                        <option>位置</option>
                        <optgroup label="FW">
                            <option value="CF">CF</option>
                            <option value="RW">RW</option>
                            <option value="LW">LW</option>
                            <option value="ST">ST</option>
                        </optgroup>
                        <optgroup label="MF">
                            <option value="LM">LM</option>
                            <option value="RM">RM</option>
                            <option value="CM">CM</option>
                            <option value="CAM">CAM</option>
                            <option value="CDM">CDM</option>
                        </optgroup>
                        <optgroup label="DF">
                            <option value="LWB">LWB</option>
                            <option value="LB">LB</option>
                            <option value="CB">CB</option>
                            <option value="RB">RB</option>
                            <option value="RWB">RWB</option>
                        </optgroup>
                        <optgroup label="GK">
                            <option value="GK">GK</option>
                        </optgroup>
                    </select>
                </li>
                <li>
                    <span>赛季：</span>
                    <select id="slSeason">
                        <option value="0">赛季</option>
                        <option value="14">2014</option>
                        <option value="10">2010</option>
                        <option value="w">WC</option>
                        <option value="l">传奇</option>
                    </select>
                </li>
                <li>
                    <span>能力：</span>
                    <select id="slMinZp">
                        <option value="0">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                        <option value="90">90</option>
                    </select>
                     - 
                    <select id="slMaxZp">
                        <option value="100">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                        <option value="90">90</option>
                    </select>
                </li>
                <li>
                    <span>联赛：</span>
                    <select id="slMatch">
                        <option value="">联赛</option>
                        <option value="1">西班牙足球甲级联赛</option>
                        <option value="2">德国足球甲级联赛</option>
                        <option value="3">英格兰足球超级联赛</option>
                        <option value="4">意大利足球甲级联赛</option>
                        <option value="5">法国足球甲级联赛</option>
                        <option value="6">荷兰足球甲级联赛</option>
                        <option value="7">比利时足球甲级联赛</option>
                        <option value="8">丹麦足球超级联赛</option>
                        <option value="9">英格兰足球冠军联赛</option>
                        <option value="10">法国足球乙级联赛</option>
                        <option value="11">德国足球乙级联赛</option>
                        <option value="12">意大利足球乙级联赛</option>
                        <option value="13">美国职业足球大联盟</option>
                        <option value="14">挪威足球超级联赛</option>
                        <option value="15">苏格兰足球超级联赛</option>
                        <option value="16">西班牙足球乙级联赛</option>
                        <option value="17">瑞典足球超级联赛</option>
                        <option value="18">英格兰足球甲级联赛</option>
                        <option value="19">阿根廷联赛</option>
                        <option value="20">葡萄牙足球联赛</option>
                        <option value="21">俄罗斯足球超级联赛</option>
                        <option value="22">瑞士足球超级联赛</option>
                        <option value="23">沙特阿拉伯足球联赛</option>
                        <option value="24">澳大利亚职业足球联赛</option>
                        <option value="25">土耳其足球超级联赛</option>
                    </select>
                </li>
                <li>
                    <span>球队：</span>
                    <select id="slJlb">
                        <option>球队</option>
                    </select>
                </li>
                <li>
                    <span>详细能力：</span>
                    <select id="slXx1">
                        <option value="">详细能力</option>
                        <option value="ss">射术</option>
                        <option value="smll">射门力量</option>
                        <option value="hx">弧线</option>
                        <option value="ys">远射</option>
                        <option value="lkcs">凌空抽射</option>
                        <option value="ryq">任意球</option>
                        <option value="fdq">罚点球</option>
                        <option value="tq">头球</option>
                        <option value="zw">站位</option>
                        <option value="sd">速度</option>
                        <option value="js">加速</option>
                        <option value="lh">灵活</option>
                        <option value="fy">反应</option>
                        <option value="tt">弹跳</option>
                        <option value="tl">体力</option>
                        <option value="qz">强壮</option>
                        <option value="ph">平衡</option>
                        <option value="dc">短传</option>
                        <option value="cc">长传</option>
                        <option value="cz">传中</option>
                        <option value="kq">控球</option>
                        <option value="pd">盘带</option>
                        <option value="pdsd">盘带速度</option>
                        <option value="zsys">战术意识</option>
                        <option value="sy">视野</option>
                        <option value="qd">抢断</option>
                        <option value="cd">铲断</option>
                        <option value="rdr">人盯人</option>
                        <option value="qnx">侵虐性</option>
                        <option value="gkpj">GK扑救</option>
                        <option value="gkskq">GK手控球</option>
                        <option value="gkdjkq">GK大脚开球</option>
                        <option value="gkfy">GK反应</option>
                        <option value="gkfszw">GK防守站位</option>
                    </select>
                    <input type="text" id="xx1val" style="width: 50px;" />
                </li>
                <li>
                    <span></span>
                    <select id="slXx2">
                        <option value="">详细能力</option>
                        <option value="ss">射术</option>
                        <option value="smll">射门力量</option>
                        <option value="hx">弧线</option>
                        <option value="ys">远射</option>
                        <option value="lkcs">凌空抽射</option>
                        <option value="ryq">任意球</option>
                        <option value="fdq">罚点球</option>
                        <option value="tq">头球</option>
                        <option value="zw">站位</option>
                        <option value="sd">速度</option>
                        <option value="js">加速</option>
                        <option value="lh">灵活</option>
                        <option value="fy">反应</option>
                        <option value="tt">弹跳</option>
                        <option value="tl">体力</option>
                        <option value="qz">强壮</option>
                        <option value="ph">平衡</option>
                        <option value="dc">短传</option>
                        <option value="cc">长传</option>
                        <option value="cz">传中</option>
                        <option value="kq">控球</option>
                        <option value="pd">盘带</option>
                        <option value="pdsd">盘带速度</option>
                        <option value="zsys">战术意识</option>
                        <option value="sy">视野</option>
                        <option value="qd">抢断</option>
                        <option value="cd">铲断</option>
                        <option value="rdr">人盯人</option>
                        <option value="qnx">侵虐性</option>
                        <option value="gkpj">GK扑救</option>
                        <option value="gkskq">GK手控球</option>
                        <option value="gkdjkq">GK大脚开球</option>
                        <option value="gkfy">GK反应</option>
                        <option value="gkfszw">GK防守站位</option>
                    </select>
                    <input type="text" id="xx2val" style="width: 50px;" />
                </li>
                <li>
                    <span>逆足脚：</span>
                    <select>
                        <option value="">习惯脚</option>
                        <option value="">左脚</option>
                        <option value="">右脚</option>
                        <option value="">左右脚</option>
                    </select>
                    <select>
                        <option value="">--</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </li>
                <li>
                    <span>花式动作：</span>
                    <select id="slHsdz">
                        <option value="">--</option>
                        <option value="2">2星</option>
                        <option value="3">3星</option>
                        <option value="4">4星</option>
                        <option value="5">5星</option>
                    </select>
                </li>
                <li>
                    <span>身高：</span>
                    <select id="slMinSg">
                        <option value="">--</option>
                        <option value="170">170</option>
                        <option value="175">175</option>
                        <option value="180">180</option>
                        <option value="185">185</option>
                        <option value="190">190</option>
                    </select>
                     - 
                    <select id="slMaxSg">
                        <option value="">--</option>
                        <option value="170">170</option>
                        <option value="175">175</option>
                        <option value="180">180</option>
                        <option value="185">185</option>
                        <option value="190">190</option>
                    </select>
                </li>
                <li>
                    <span>体重：</span>
                    <select id="slMinTz">
                        <option value="">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                    </select>
                     - 
                    <select id="slMaxTz">
                        <option value="">--</option>
                        <option value="65">65</option>
                        <option value="70">70</option>
                        <option value="75">75</option>
                        <option value="80">80</option>
                        <option value="85">85</option>
                    </select>
                </li>
                <li>
                    <span>出生年份：</span>
                    <select id="slMinCsnf">
                        <option value="">--</option>
                        <option value="1970">1970</option>
                        <option value="1975">1875</option>
                        <option value="1980">1980</option>
                        <option value="1985">1985</option>
                        <option value="1990">1990</option>
                    </select>
                     - 
                    <select id="slMaxCsnf">
                        <option value="">--</option>
                        <option value="1970">1970</option>
                        <option value="1975">1875</option>
                        <option value="1980">1980</option>
                        <option value="1985">1985</option>
                        <option value="1990">1990</option>
                    </select>
                </li>
                <li>
                    <span>隐藏能力：</span>
                    <select id="slHdProp"></select>
                </li>
                <li>
                    <span></span>
                    <button type="button" class="btn btn-default">重置</button>
                    <button type="button" class="btn btn-primary" id="btnSearch">查询</button>
                </li>
            </ul>
        </div>
    </div>
    <div class="main">
        <table class="tb-team table table-hover table-striped" id="listPlayer">
            <thead>
                <tr>
                    <th width="5%"></th>
                    <th>赛季</th>
                    <th>位置</th>
                    <th>球员名</th>
                    <th>能力</th>
                    <th>俱乐部</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <nav class="nav-page">
            <ul class="pagination">
                <li>
                    <a href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
                <li><a href="#">5</a></li>
                <li>
                    <a href="#" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>
<footer class="footer">
    <p>© 2015 ol3vs.com Inc. All rights reserved.</p>
</footer>

<div class="modal" id="vsModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">球员对比</h4>
            </div>
            <div class="modal-body">
                <div class="box-player-vs box-card">
                    <div class="clearfix" id="boxPlayerInfo">
                    </div>
                    <div class="clearfix">
                        <div class="box-level-change">
                            <span>查看能力：</span>
                            <select id="slQh1">
                                <option value="1">强化</option>
                                <option value="0">+0</option>
                                <option value="1">+1</option>
                                <option value="2">+2</option>
                                <option value="3">+3</option>
                                <option value="4">+4</option>
                                <option value="5">+5</option>
                                <option value="6">+6</option>
                                <option value="7">+7</option>
                                <option value="8">+8</option>
                                <option value="9">+9</option>
                                <option value="10">+10</option>
                            </select>
                            <select id="slLv1">
                                <option value="1">等级</option>
                                <option value="1">Lv.1</option>
                                <option value="2">Lv.2</option>
                                <option value="3">Lv.3</option>
                                <option value="4">Lv.4</option>
                                <option value="5">Lv.5</option>
                                <option value="6">Lv.6</option>
                                <option value="7">Lv.7</option>
                                <option value="8">Lv.8</option>
                                <option value="9">Lv.9</option>
                                <option value="10">Lv.10</option>
                                <option value="11">Lv.11</option>
                                <option value="12">Lv.12</option>
                                <option value="13">Lv.13</option>
                                <option value="14">Lv.14</option>
                                <option value="15">Lv.15</option>
                                <option value="16">Lv.16</option>
                                <option value="17">Lv.17</option>
                                <option value="18">Lv.18</option>
                                <option value="19">Lv.19</option>
                                <option value="20">Lv.20</option>
                            </select>
                        </div>
                        <div class="box-level-change">
                            <span>查看能力：</span>
                            <select id="slQh2">
                                <option value="1">强化</option>
                                <option value="0">+0</option>
                                <option value="1">+1</option>
                                <option value="2">+2</option>
                                <option value="3">+3</option>
                                <option value="4">+4</option>
                                <option value="5">+5</option>
                                <option value="6">+6</option>
                                <option value="7">+7</option>
                                <option value="8">+8</option>
                                <option value="9">+9</option>
                                <option value="10">+10</option>
                            </select>
                            <select id="slLv2">
                                <option value="1">等级</option>
                                <option value="1">Lv.1</option>
                                <option value="2">Lv.2</option>
                                <option value="3">Lv.3</option>
                                <option value="4">Lv.4</option>
                                <option value="5">Lv.5</option>
                                <option value="6">Lv.6</option>
                                <option value="7">Lv.7</option>
                                <option value="8">Lv.8</option>
                                <option value="9">Lv.9</option>
                                <option value="10">Lv.10</option>
                                <option value="11">Lv.11</option>
                                <option value="12">Lv.12</option>
                                <option value="13">Lv.13</option>
                                <option value="14">Lv.14</option>
                                <option value="15">Lv.15</option>
                                <option value="16">Lv.16</option>
                                <option value="17">Lv.17</option>
                                <option value="18">Lv.18</option>
                                <option value="19">Lv.19</option>
                                <option value="20">Lv.20</option>
                            </select>
                        </div>
                    </div>
                    <div class="box-player-data clearfix">
                        <div>
                            <div class="btn-group btn-group-sm" role="group">
                                <button type="button" class="btn btn-default">总能力</button>
                                <button type="button" class="btn btn-default">CF</button>
                                <button type="button" class="btn btn-default">ST</button>
                            </div>
                        </div>
                        <table id="listPlayerVs" class="tb-team table table-hover table-striped">
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/lib/handlebars/handlebars.js"></script>
<script type="text/javascript" src="js/datas.js"></script>
<script id="playerTpl" type="text/x-handlebars-template">
{{#each players}}
    <tr>
        <td class="td-c"><input type="checkbox" data-id="{{id}}"></td>
        <td><span class="label {{#cls}}{{pos}}{{/cls}}">{{pos}}</span></td>
        <td><span class="icon-sj icon-sj-{{sj}}"></span></td>
        <td>{{name}}</td>
        <td>{{zp}}</td>
        <td>{{jlb}}</td>
    </tr>
{{/each}}
</script>
<script id="playerInfoTpl" type="text/x-handlebars-template">
{{#each players}}
    <div class="box-player-info">
        <div class="clearfix">
            <div class="box-head">
                <img src="img/p2702.png" />
                <div class="box-head-name">
                    <span class="icon-sj icon-sj-{{sj}}"></span> {{name}}
                </div>
            </div>
            <div>
                <ul class="list-player-info">
                    <li>{{sg}}CM {{tz}}KG</li>
                    <li>{{sr}}</li>
                    <li>意大利</li>
                    <li>{{jlb}}</li>
                </ul>
                <div>
                    <ul class="list-player-pos">
                        {{#poslist}}{{poses}}{{/poslist}}
                    </ul>
                </div>
            </div>
        </div>
    </div>
{{/each}}
</script>
<script id="vsTpl" type="text/x-handlebars-template">
{{#each people}}
    <tr class="{{pos}}">
        <td width="200px">
            <span class="data-item">{{name}}</span>
        </td>
        <td>
            <span class="data-player-f">{{#aaa}}{{item}}{{/aaa}}</span>
        </td>
        <td>
            <span class="data-player-s">{{#bbb}}{{item}}{{/bbb}}</span>
        </td>
        <td>
            <span class="data-diff">{{#diff}}{{item}}{{/diff}}</span>
        </td>
    </tr>
{{/each}}
</script>
<script type="text/javascript">
$(function () {
    Handlebars.registerHelper('cls', function(options) {
        var cls = {
            "ST": "label-danger",
            "CF": "label-danger",
            "LW": "label-danger",
            "RW": "label-danger",
            "CAM": "label-success",
            "CM": "label-success",
            "LM": "label-success",
            "RM": "label-success",
            "CDM": "label-success",
            "LB": "label-primary",
            "RB": "label-primary",
            "CB": "label-primary",
            "SW": "label-primary",
            "GK": "label-warning"
        };
        return cls[options.fn(this)];
    });

    var source   = $("#playerTpl").html();
    var template = Handlebars.compile(source);
    var html = template(defaultPlayers);
    $("#listPlayer").find("tbody").html(html);

    var vs = {
        "players": [{
            "name": "亨利",
            "sj": "06",
            "sg": 180,
            "tz": 80,
            "sr": "1980-08-08",
            "jlb": "阿森纳",
            "pos": "ST",
            "poses": "cf:80|st:82",
            "zp": 81,
            "ss": 70,
            "smll": 13,
            "hx": 40,
            "ys": 50,
            "lkcs": 60,
            "ryq": 67,
            "fdq": 79,
            "tq": 80,
            "zw": 70,
            "sd": 80,
            "js": 98,
            "lh": 67,
            "fy": 87,
            "tt": 89,
            "tl": 98,
            "qz": 78,
            "ph": 65,
            "dc": 89,
            "cc": 67,
            "cz": 78,
            "kq": 91,
            "pd": 92,
            "zsys": 56,
            "sy": 86,
            "qd": 82,
            "cd": 81,
            "rdr": 85,
            "qnx": 92,
            "gkpj": 93,
            "gkskq": 68,
            "gkdjkq": 78,
            "gkfy": 99,
            "gkfszw": 100
        },{
            "name": "罗纳尔迪尼奥",
            "sj": "06",
            "sg": 180,
            "tz": 80,
            "sr": "1980-08-08",
            "jlb": "阿森纳",
            "pos": "ST",
            "poses": "cf:80|st:82",
            "zp": 81,
            "ss": 72,
            "smll": 13,
            "hx": 40,
            "ys": 50,
            "lkcs": 60,
            "ryq": 67,
            "fdq": 79,
            "tq": 80,
            "zw": 70,
            "sd": 80,
            "js": 98,
            "lh": 67,
            "fy": 87,
            "tt": 89,
            "tl": 98,
            "qz": 78,
            "ph": 65,
            "dc": 89,
            "cc": 67,
            "cz": 78,
            "kq": 91,
            "pd": 92,
            "zsys": 56,
            "sy": 86,
            "qd": 82,
            "cd": 81,
            "rdr": 85,
            "qnx": 92,
            "gkpj": 93,
            "gkskq": 68,
            "gkdjkq": 78,
            "gkfy": 99,
            "gkfszw": 100
        }],
        "people": [
            {"name": "射术", "pos": "cam rw cf st", "item": "ss"},
            {"name": "射门力量", "pos": "cam rw cf st", "item": "smll"},
            {"name": "弧线", "pos": "", "item": "hx"},
            {"name": "远射", "pos": "cm cam rw cf st rm", "item": "ys"},
            {"name": "凌空抽射", "pos": "cf st", "item": "lkcs"},
            {"name": "任意球", "pos": "", "item": "ryq"},
            {"name": "罚点球", "pos": "", "item": "fdq"},
            {"name": "头球", "pos": "rb cb cdm cm cam cf st", "item": "tq"},
            {"name": "站位", "pos": "rb cb cdm cm cam rm", "item": "zw"},
            {"name": "速度", "pos": "rb cb cdm cm cam rw cf st rm", "item": "sd"},
            {"name": "加速", "pos": "rw cf st rm", "item": "js"},
            {"name": "灵活", "pos": "rw rm", "item": "lh"},
            {"name": "反应", "pos": "gk rb cb cdm cm cam rw cf st rm", "item": "fy"},
            {"name": "弹跳", "pos": "gk cb", "item": "tt"},
            {"name": "体力", "pos": "rb cdm cm rw rm", "item": "tl"},
            {"name": "强壮", "pos": "rb cb cdm cm cf st", "item": "qz"},
            {"name": "平衡", "pos": "", "item": "ph"},
            {"name": "短传", "pos": "rb cb cdm cm cam rw cf st rm", "item": "dc"},
            {"name": "长传", "pos": "cdm cm cam rw rm", "item": "cc"},
            {"name": "传中", "pos": "rb rw cf rm", "item": "cz"},
            {"name": "控球", "pos": "rb cb cdm cm cam rw cf st rm", "item": "kq"},
            {"name": "盘带", "pos": "cm cam rw cf st rm", "item": "pd"},
            {"name": "战术意识", "pos": "", "item": "zsys"},
            {"name": "视野", "pos": "cdm cm cam rw rm", "item": "sy"},
            {"name": "抢断", "pos": "rb cb cdm cm", "item": "qd"},
            {"name": "铲断", "pos": "rb cb cdm", "item": "cd"},
            {"name": "人盯人", "pos": "cb cdm", "item": "rdr"},
            {"name": "侵略性", "pos": "rb cb cdm", "item": "qnx"},
            {"name": "GK扑救", "pos": "gk", "item": "gkpj"},
            {"name": "GK手控球", "pos": "gk", "item": "gkskq"},
            {"name": "GK大脚开球", "pos": "gk", "item": "gkdjkq"},
            {"name": "GK反应", "pos": "gk", "item": "gkfy"},
            {"name": "GK防守站位", "pos": "gk", "item": "gkfszw"}
        ]
    };

    Handlebars.registerHelper('aaa', function(options) {
        return vs.players[0][options.fn(this)];
    });

    Handlebars.registerHelper('bbb', function(options) {
        return vs.players[1][options.fn(this)];
    });

    Handlebars.registerHelper('poslist', function(options) {
        var str = options.fn(this);
        var arr = str.split("|");
        var html = "";

        for (var  i = 0; i < arr.length; i++) {
            html += "<li><span class=\"label-pos label label-danger\">";
            html += arr[i].split(":")[0];
            html += "</span>";
            html += arr[i].split(":")[1];
            html += "</li>";
        }
        return html;
    });

    Handlebars.registerHelper('diff', function(options) {
        return vs.players[0][options.fn(this)] - vs.players[1][options.fn(this)];
    });

    var source   = $("#playerInfoTpl").html();
    var template = Handlebars.compile(source);
    var html = template(vs);
    $("#boxPlayerInfo").html(html);
    var source   = $("#vsTpl").html();
    var template = Handlebars.compile(source);
    var html = template(vs);
    $("#listPlayerVs").find("tbody").html(html);


    $("#slMatch").change(function () {
        var val = $(this)[0].selectedIndex;
        var doc = document.createDocumentFragment();
        var datas = Matches[val - 1].team;
        var op = document.createElement("option");

        op.text = "球队";
        op.value = 0;
        doc.appendChild(op);
        for (var i = 0; i < datas.length; i++) {
            op = document.createElement("option");
            op.text = datas[i].name;
            op.value = datas[i].id;
            doc.appendChild(op);
        }
        $("#slJlb").empty()[0].appendChild(doc);
    });

    /*
    * 加载隐藏能力
    */
    var doc = document.createDocumentFragment();
    var op = {};
    for (var i = 0; i < HdProp.length; i++) {
        op = document.createElement("option");
        op.text = HdProp[i];
        op.value = i;
        doc.appendChild(op);
    }
    $("#slHdProp")[0].appendChild(doc);



    $("#btnSearch").click(function () {
        search();
    });

    $("#txtName").keypress(function(e) {
        if (e.keyCode === 13) {
            search();
        }
    });

    function search() {
        var data = {
            "name": $("#txtName").val().split(/[,，]/g),  // 名字
            "pos": $("#slPos").val(),  // 球员位置
            "sj": $("#slSeason").val(),   // 赛季
            "ls": $("#slMatch").val(),
            "jlb": $("#slJlb").val(),
            "minZp": $("#slMinZp").val(),
            "maxZp": $("#slMaxZp").val(),
            "minTz": $("#slMinTz").val(),
            "maxTz": $("#slMaxTz").val(),
            "minSg": $("#slMinSg").val(),
            "maxSg": $("#slMaxSg").val(),
            "minCsnf": $("#slMinCsnf").val(),
            "maxCsnf": $("#slMaxCsnf").val(),
            "hsdz": $("#slHsdz").val(),
            "ycnl": $("#slHdProp").val()
        };

        if ($("#slXx1").val().length !== 0) {
            data.xx1 = $("#slXx1").val();
            data.xx1val = $("#xx1val").val();
        }

        if ($("#slXx2").val().length !== 0) {
            data.xx1 = $("#slXx2").val();
            data.xx1val = $("#xx2val").val();
        }

        $.post("module/search.php?act=list", data, function (resp) {
            console.log(resp);
        });
    }

    $("#listPlayer").on("click", "tr", function () {
        var cbox = $(this).children().find("input");
        if (cbox.prop("checked")) {
            cbox.prop("checked", false);
        } else {
            cbox.prop("checked", true);
        }
        cbox.trigger("change");
    }).on("click", "input", function (e) {
        e.stopPropagation();
    }).on("change", "input", function (e) {
        var len = $("#listPlayer").find("input:checked").length;
        if (len === 2) {
            $('#vsModal').modal("show");
        }
    });

    $('#vsModal').on('hide.bs.modal', function () {
        $("#listPlayer").find("input:checked").prop("checked", false);
    })
    

    $("#slQh1").change(function(event) {
        var xx = vs.players[0];
        var qh = ~~$(this).val();
        var curQh = 1;
        var diff = 0;

        if (xx.qh !== undefined) {
            curQh = xx.qh
        }
        diff = getQhDiff(qh) - getQhDiff(curQh);
        for (var i in xx) {
            if (typeof xx[i] === "number") {
                xx[i] = xx[i] + diff;
            }
        }
        xx.qh = qh;
        var source   = $("#vsTpl").html();
        var template = Handlebars.compile(source);
        var html = template(vs);
        $("#listPlayerVs").find("tbody").html(html);
    });

    $("#slLv1").change(function(event) {
        var xx = vs.players[0];
        var lv = ~~$(this).val();
        var curLv = 1;
        var diff = 0;

        if (xx.lv !== undefined) {
            curLv = xx.lv
        }
        diff = lv - curLv;
        for (var i in xx) {
            if (typeof xx[i] === "number") {
                xx[i] = xx[i] + diff;
            }
        }
        xx.lv = lv;
        var source   = $("#vsTpl").html();
        var template = Handlebars.compile(source);
        var html = template(vs);
        $("#listPlayerVs").find("tbody").html(html);
    });

    /*
    * 获取强化能力差
    */
    function getQhDiff (qh) {
        var num = 0;
        if (qh === 0) {
            num = -5;
        } else if (qh < 5) {
            num = qh - 1
        } else if (qh < 8) {
            num = 5 + (qh - 5) * 2;
        } else if (qh <= 10) {
            num = 12 + (qh - 8) * 3;
        }
        return num;
    }
});
</script>
</body>
</html>